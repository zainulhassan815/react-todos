var _=Object.defineProperty,C=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var v=(s,e,t)=>e in s?_(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,N=(s,e)=>{for(var t in e||(e={}))B.call(e,t)&&v(s,t,e[t]);if(w)for(var t of w(e))E.call(e,t)&&v(s,t,e[t]);return s},k=(s,e)=>C(s,D(e));var g=(s,e,t)=>(v(s,typeof e!="symbol"?e+"":e,t),t);import{j as O,L as j,u as L,a as P,r as u,S as R,b as F,X as J,F as Y,C as A,T as M,c as K,d as U,R as X,e as S,P as $,f as q,g as H,B as z}from"./vendor.1b2d6cd3.js";const G=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const m of n.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&a(m)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}};G();const o=O.exports.jsx,l=O.exports.jsxs,V=({disabled:s=!1,location:e})=>l(j,{onClick:t=>{s&&t.preventDefault()},to:e.path,className:"inline-flex items-center justify-center gap-2 rounded-md bg-indigo-100 p-2 text-indigo-500 shadow-md transition-all duration-150 hover:bg-indigo-300 dark:bg-gray-900 dark:hover:bg-gray-700",children:[e.icon,o("span",{className:"text-md",children:e.name})]},e.name),W=({repository:s})=>{const e=L(),[t,a]=P(),[r,n]=u.exports.useState(null),[m,x]=u.exports.useState(""),[y,b]=u.exports.useState(""),[i,d]=u.exports.useState(!1);return u.exports.useEffect(()=>{let c=t.get("todo");if(c){const p=s.getTodo(c);p&&(n(p),x(p.title),b(p.body),d(p.completed))}},[]),l("div",{className:"mx-auto p-4 flex justify-center gap-2 flex-col max-w-xl",children:[o("input",{value:m,onChange:c=>x(c.target.value),placeholder:"Title","aria-label":"Todo Title",className:"w-full p-4 rounded-md bg-indigo-100 focus:ring-indigo-500 dark:bg-gray-800 dark:text-gray-100"}),o("textarea",{value:y,onChange:c=>b(c.target.value),placeholder:"Description","aria-label":"Todo Description",className:"border-none max-h-64 w-full p-4 rounded-md bg-indigo-100 focus:ring-indigo-500 dark:bg-gray-800 dark:text-gray-100 focus:ring-2"}),r&&l("div",{className:"flex items-center gap-2 py-3",children:[o("input",{type:"checkbox",checked:i,onChange:()=>{d(!i)},className:"rounded-md w-6 h-6 bg-white dark:bg-gray-800 border-2 active:border-indigo-500"}),o("p",{className:"text-md text-black font-semibold dark:text-gray-100",children:"Completed"})]}),l("button",{onClick:()=>{var p;let c={id:(p=r==null?void 0:r.id)!=null?p:Date.now(),title:m,body:y,date:new Date,completed:i};r?s.updateTodo(c):s.saveTodo(c),e("/")},className:"flex gap-2 justify-center items-center p-4 bg-indigo-500 rounded-md shadow-md text-white text-md transition-all duration-150 hover:scale-[1.02]",children:[o(R,{className:"h-6 w-6"}),o("span",{children:"Save"})]})]})},T=({icon:s,styleOverrides:e,onClick:t})=>o("button",{className:`inline-grid h-12 w-12 place-content-center rounded-full bg-indigo-100 p-2 text-indigo-500 transition-all duration-150 hover:scale-105 hover:bg-indigo-500 hover:text-white hover:shadow-sm dark:bg-gray-700
      ${e!=null?e:""}`,onClick:t,children:s}),Z=({searchQuery:s,onChange:e})=>{const[t,a]=u.exports.useState(s!=null?s:"");return l("div",{className:"flex items-center justify-center gap-2 rounded-md bg-indigo-50 p-2 shadow-md dark:bg-gray-800 dark:text-white",children:[o(F,{className:"h-6 w-6 text-indigo-500"}),o("input",{className:"flex-1 bg-transparent outline-none",value:t,onChange:r=>{let n=r.target.value;a(n),e==null||e(n)},placeholder:"Search","aria-label":"Search Todos"}),o(T,{icon:o(J,{className:"h-6 w-6"}),onClick:()=>{a(""),e==null||e("")}})]})},Q=({todo:s,onClick:e,onDeleteClick:t,onCompleteClick:a})=>l("div",{onClick:e,className:"flex cursor-pointer flex-col gap-2 rounded-md bg-indigo-50 p-3 shadow-md transition-all duration-150 hover:scale-[1.03] hover:shadow-lg hover:ring-2 hover:ring-indigo-300 dark:bg-gray-800",children:[o("p",{className:"bold text-xl text-black dark:text-gray-100",children:s.title}),o("p",{className:"text-md text-gray-800 dark:text-gray-300",children:s.body}),l("div",{className:"mt-auto flex items-center justify-between",children:[o("p",{className:"bold text-sm text-gray-500",children:s.date.toDateString()}),l("div",{className:"inline-flex items-center justify-center gap-2 place-self-end",children:[o(T,{onClick:r=>{a==null||a(),r.stopPropagation()},icon:s.completed?o(Y,{className:"h-6 w-6"}):o(A,{className:"h-6 w-6"}),styleOverrides:"text-emerald-500 bg-emerald-100 hover:bg-emerald-500"}),o(T,{onClick:r=>{t==null||t(),r.stopPropagation()},icon:o(M,{className:"h-6 w-6"}),styleOverrides:"text-red-500 bg-red-100 hover:bg-red-500"})]})]})]}),ee=({repository:s})=>{const[e,t]=u.exports.useState([]),[a,r]=u.exports.useState([]),n=L(),m=K();u.exports.useEffect(()=>{let i=s.listTodos();t(i),r(i)},[m]);function x(i){if(i.trim().replaceAll(" ","").length>0){let d=i.toLocaleLowerCase(),h=a.filter(f=>f.title.toLocaleLowerCase().includes(d)||f.body.toLocaleLowerCase().includes(d));t(h)}else t(a)}function y(i){if(s.deleteTodo(i.id.toString())){const h=e.filter(f=>f!==i);t(h),r(h)}}function b(i){const d=[...e];let h={id:i.id,title:i.title,body:i.body,date:i.date,completed:!i.completed};s.updateTodo(h)&&(d.splice(e.indexOf(i),1,h),t(d),r(d))}return l("div",{className:"flex w-full flex-col gap-4 p-4 dark:bg-gray-900",children:[o(Z,{onChange:x}),o("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6",children:e.map(i=>o(Q,{onClick:()=>n(`/create?todo=${i.id}`),todo:i,onDeleteClick:()=>y(i),onCompleteClick:()=>b(i)},i.id))})]})};class te{constructor(e){g(this,"TODO_KEYS","todo_keys");g(this,"saveKey",e=>{try{let t=[...this.getKeys(),e],a=JSON.stringify(t);return this._storage.setItem(this.TODO_KEYS,a),!0}catch(t){console.error("Failed to save key.",t)}return!1});g(this,"deleteKey",e=>{let t=this.getKeys().filter(r=>r!==e),a=JSON.stringify(t);this._storage.setItem(this.TODO_KEYS,a)});g(this,"saveTodo",e=>{try{let t=JSON.stringify(e);return this.getKeys().includes(e.id.toString())||this.saveKey(e.id.toString()),this._storage.setItem(e.id.toString(),t),!0}catch(t){console.error("Failed to save todo.",t)}return!1});g(this,"getTodo",e=>{let t=this._storage.getItem(e.toString());if(t){let a=JSON.parse(t);return k(N({},a),{date:new Date(Date.parse(a.date))})}return null});g(this,"listTodos",()=>{try{return this.getKeys().map(a=>this.getTodo(a)).filter(a=>a!==null).map(a=>a)}catch(e){console.error("Failed to list todos.",e)}return[]});g(this,"updateTodo",e=>this.getTodo(e.id.toString())?this.saveTodo(e):!1);g(this,"deleteTodo",e=>(this.deleteKey(e),this._storage.removeItem(e.toString()),!0));this._storage=e}getKeys(){let e=this._storage.getItem(this.TODO_KEYS);return e?JSON.parse(e):[]}}const se=({title:s,icon:e,actions:t})=>l("header",{className:"sticky top-0 flex h-16 w-full items-center justify-between bg-white px-4 shadow-md dark:bg-gray-800",children:[l(j,{to:"/",className:"cursor-pointer hover:opacity-80 inline-flex items-center justify-center gap-2",children:[e,o("p",{className:"text-xl font-bold dark:text-gray-100",children:s})]}),o("div",{className:"inline-flex items-center justify-center gap-2",children:t})]}),oe=[{name:"Create Todo",path:"/create",icon:o($,{className:"h-4 w-4"})}],I=new te(localStorage);function re(){const s=K();return l("div",{className:"h-screen w-full dark:bg-gray-900",children:[o(se,{icon:o(U,{className:"h-8 w-8 text-indigo-500"}),title:"Todos",actions:oe.map(e=>o(V,{disabled:s.pathname.includes("create"),location:e},e.name))}),l(X,{children:[o(S,{path:"/",element:o(ee,{repository:I})}),o(S,{path:"/create",element:o(W,{repository:I})})]})]})}q.render(o(H.StrictMode,{children:o(z,{children:o(re,{})})}),document.getElementById("root"));
